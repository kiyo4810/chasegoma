<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>ã‚´ãƒã¡ã‚ƒã‚“ã‚’è¿½ãˆ - Fullscreen</title>
    <link rel="icon" href="images/goma.png" type="image/png">
    <link rel="apple-touch-icon" href="images/goma.png">
    <meta name="apple-mobile-web-app-title" content="ã‚´ãƒã¡ã‚ƒã‚“ã‚’è¿½ãˆ">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="manifest" href="manifest.json">
    <style>
      /* å…¨ä½“ã®ä½™ç™½ã‚’æ¶ˆã—ã¦ã€ç”»é¢ã‹ã‚‰ã¯ã¿å‡ºã•ãªã„ã‚ˆã†ã«è¨­å®š */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        touch-action: none; /* ã‚¹ãƒãƒ›ã§ã®æ„å›³ã—ãªã„ã‚ºãƒ¼ãƒ ã‚„ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’é˜²æ­¢ */
      }

      /* èƒŒæ™¯ã‚’æ¿ƒã„ç´ºè‰²ã«ã—ã¦ç”»é¢ã„ã£ã±ã„ã«åºƒã’ã‚‹ */
      html, body {
        width: 100%;
        height: 100%;
        overflow: hidden;
        background-color: #0a0a32;
      }

      /* ã‚²ãƒ¼ãƒ ç”»é¢ã‚’ç”»é¢å…¨ä½“ã«è¡¨ç¤ºã—ã€ãƒã‚¦ã‚¹ã‚«ãƒ¼ã‚½ãƒ«ã‚’æŒ‡ã®å½¢ã«ã™ã‚‹ */
      canvas {
        display: block;
        width: 100vw;
        height: 100vh;
        cursor: pointer;
      }

      /* ãƒ‰ãƒ©ãƒƒã‚°å¯èƒ½ãªéŸ³é‡ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®è¦‹ãŸç›® */
      #volume-container {
        position: absolute;
        top: 20px;
        left: 20px;
        z-index: 1000;
        background: rgba(255, 255, 255, 0.1);
        padding: 15px;
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.3);
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
        cursor: move;
        user-select: none;
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
      }

      .volume-label {
        color: white;
        font-size: 14px;
        font-family: sans-serif;
        pointer-events: none;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
      }

      input[type="range"] {
        cursor: pointer;
        width: 100px;
      }
    </style>
  </head>
  <body>
    <div id="volume-container">
      <div class="volume-label">ğŸ”Š <span id="volumeValue">70</span>%</div>
      <input type="range" id="volumeSlider" min="0" max="100" value="70" />
    </div>

    <canvas id="gameCanvas"></canvas>

    <script>
      // --- 1. ç”»é¢ä¸Šã®éƒ¨å“ï¼ˆHTMLè¦ç´ ï¼‰ã‚’å–å¾—ã—ã¦æ“ä½œã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ ---
      const canvas = document.getElementById("gameCanvas"); // æç”»ç”¨ã®ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚’å–å¾—
      const ctx = canvas.getContext("2d"); // æç”»ã™ã‚‹ãŸã‚ã®ã€Œãƒšãƒ³ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰ã€ã‚’æº–å‚™
      const volumeContainer = document.getElementById("volume-container"); // éŸ³é‡ãƒ‘ãƒãƒ«ã®æ ã‚’å–å¾—
      const volumeSlider = document.getElementById("volumeSlider"); // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼æœ¬ä½“ã‚’å–å¾—
      const volumeValue = document.getElementById("volumeValue"); // éŸ³é‡ã®æ•°å­—ã‚’è¡¨ç¤ºã™ã‚‹å ´æ‰€ã‚’å–å¾—

      // --- 2. ã‚²ãƒ¼ãƒ ã®çŠ¶æ…‹ã‚’ç®¡ç†ã™ã‚‹å¤‰æ•°ï¼ˆãƒ‡ãƒ¼ã‚¿ï¼‰ã®æº–å‚™ ---
      let score = 0; // ç¾åœ¨ã®ã‚¹ã‚³ã‚¢ï¼ˆæ•ã¾ãˆãŸå›æ•°ï¼‰
      let spriteX = 0; // ã‚´ãƒã¡ã‚ƒã‚“ã®ç¾åœ¨ã®æ¨ªä½ç½®
      let spriteY = 0; // ã‚´ãƒã¡ã‚ƒã‚“ã®ç¾åœ¨ã®ç¸¦ä½ç½®
      let spriteSpeed = [0, 0]; // ã‚´ãƒã¡ã‚ƒã‚“ã®ç§»å‹•é€Ÿåº¦ [æ¨ªã®é€Ÿã•, ç¸¦ã®é€Ÿã•]
      let volume = 70; // åŠ¹æœéŸ³ã®éŸ³é‡ï¼ˆåˆæœŸè¨­å®šã¯70%ï¼‰
      let isGameStarted = false; // ã‚²ãƒ¼ãƒ ãŒé–‹å§‹ã•ã‚ŒãŸã‹ã©ã†ã‹ã®ç›®å°ï¼ˆãƒ•ãƒ©ã‚°ï¼‰

      // --- 3. éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã¨ç”»åƒã®èª­ã¿è¾¼ã¿ ---
      const catSound = new Audio("images/cat.mp3"); // é€šå¸¸ã®ã€Œãƒ‹ãƒ£ãƒ¼ã€ã¨ã„ã†éŸ³ã‚’æº–å‚™
      const specialSound = new Audio("images/special.mp3"); // 10å›ã”ã¨ã®ç‰¹åˆ¥ãªéŸ³ã‚’æº–å‚™
      
      const spriteImage = new Image(); // ã‚´ãƒã¡ã‚ƒã‚“ã®ç”»åƒã‚’å…¥ã‚Œã‚‹ç®±ã‚’ä½œã‚‹
      spriteImage.src = "images/goma.png"; // ç”»åƒã®ãƒ•ã‚¡ã‚¤ãƒ«å ´æ‰€ã‚’æŒ‡å®š
      let isImageLoaded = false; // ç”»åƒãŒèª­ã¿è¾¼ã¿çµ‚ã‚ã£ãŸã‹ã©ã†ã‹ã®ç›®å°
      spriteImage.onload = () => { isImageLoaded = true; }; // èª­ã¿è¾¼ã¿ãŒå®Œäº†ã—ãŸã‚‰ç›®å°ã‚’ã€Œå®Œäº†ã€ã«ã™ã‚‹

      // --- 4. ç”»é¢ã‚µã‚¤ã‚ºã«åˆã‚ã›ã¦ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚’èª¿æ•´ã™ã‚‹å‡¦ç† ---
      function resize() {
        canvas.width = window.innerWidth; // ã‚­ãƒ£ãƒ³ãƒã‚¹ã®å¹…ã‚’ç”»é¢ã„ã£ã±ã„ã«åºƒã’ã‚‹
        canvas.height = window.innerHeight; // ã‚­ãƒ£ãƒ³ãƒã‚¹ã®é«˜ã•ã‚’ç”»é¢ã„ã£ã±ã„ã«åºƒã’ã‚‹
        if (!isGameStarted) { // ã‚²ãƒ¼ãƒ é–‹å§‹å‰ãªã‚‰
          spriteX = canvas.width / 2; // ã‚´ãƒã¡ã‚ƒã‚“ã‚’ç”»é¢ã®ä¸­å¤®ï¼ˆæ¨ªï¼‰ã«é…ç½®
          spriteY = canvas.height / 2; // ã‚´ãƒã¡ã‚ƒã‚“ã‚’ç”»é¢ã®ä¸­å¤®ï¼ˆç¸¦ï¼‰ã«é…ç½®
        }
      }
      window.addEventListener("resize", resize); // ã‚¹ãƒãƒ›ã®å‘ãã‚„ç”»é¢ã‚µã‚¤ã‚ºãŒå¤‰ã‚ã£ãŸã‚‰å†è¨ˆç®—
      resize(); // æœ€åˆã«ä¸€åº¦å®Ÿè¡Œã—ã¦ã‚µã‚¤ã‚ºã‚’åˆã‚ã›ã‚‹

      // --- 5. éŸ³é‡ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®å‹•ãã‚’ç›£è¦–ã™ã‚‹ ---
      volumeSlider.addEventListener("input", (e) => { // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚’å‹•ã‹ã—ãŸã¨ã
        volume = parseInt(e.target.value); // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®å€¤ã‚’éŸ³é‡ãƒ‡ãƒ¼ã‚¿ã«åæ˜ 
        volumeValue.textContent = volume; // ç”»é¢ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹æ•°å­—ã‚’æ›¸ãæ›ãˆã‚‹
      });

      // --- 6. éŸ³é‡ãƒ‘ãƒãƒ«ã‚’ãƒ‰ãƒ©ãƒƒã‚°ã§ç§»å‹•ã•ã›ã‚‹ä»•çµ„ã¿ ---
      let isDragging = false; // ãƒ‘ãƒãƒ«ã‚’ã¤ã‹ã‚“ã§ã„ã‚‹ã‹ã©ã†ã‹ã®ç›®å°
      let offset = { x: 0, y: 0 }; // ã¤ã‹ã‚“ã ä½ç½®ã¨ãƒ‘ãƒãƒ«å·¦ä¸Šã®ã‚ºãƒ¬ã‚’è¨˜éŒ²ã™ã‚‹å¤‰æ•°

      const startDrag = (e) => { // ãƒã‚¦ã‚¹ã‚’æŠ¼ã—ãŸã€ã¾ãŸã¯æŒ‡ã§è§¦ã‚ŒãŸã¨ã
        if (e.target === volumeSlider) return; // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼è‡ªä½“ã‚’è§¦ã£ã¦ã„ã‚‹ã¨ãã¯å‹•ã‹ã•ãªã„
        isDragging = true; // ã€Œã¤ã‹ã‚“ã§ã„ã‚‹çŠ¶æ…‹ã€ã«ã™ã‚‹
        const clientX = e.touches ? e.touches[0].clientX : e.clientX; // è§¦ã‚ŒãŸæ¨ªä½ç½®ã‚’å–å¾—
        const clientY = e.touches ? e.touches[0].clientY : e.clientY; // è§¦ã‚ŒãŸç¸¦ä½ç½®ã‚’å–å¾—
        offset.x = clientX - volumeContainer.offsetLeft; // å·¦ç«¯ã‹ã‚‰ã®ã‚ºãƒ¬ã‚’è¨ˆç®—
        offset.y = clientY - volumeContainer.offsetTop; // ä¸Šç«¯ã‹ã‚‰ã®ã‚ºãƒ¬ã‚’è¨ˆç®—
      };

      const doDrag = (e) => { // æŒ‡ã‚„ãƒã‚¦ã‚¹ã‚’å‹•ã‹ã—ã¦ã„ã‚‹ã¨ã
        if (!isDragging) return; // ã¤ã‹ã‚“ã§ã„ãªã‘ã‚Œã°ä½•ã‚‚ã—ãªã„
        const clientX = e.touches ? e.touches[0].clientX : e.clientX; // ä»Šã®æ¨ªä½ç½®
        const clientY = e.touches ? e.touches[0].clientY : e.clientY; // ä»Šã®ç¸¦ä½ç½®
        // ãƒ‘ãƒãƒ«ãŒç”»é¢ã®å¤–ã«å‡ºãªã„ã‚ˆã†ã«è¨ˆç®—ã—ãªãŒã‚‰ä½ç½®ã‚’æ›´æ–°ã™ã‚‹
        volumeContainer.style.left = Math.max(0, Math.min(window.innerWidth - volumeContainer.offsetWidth, clientX - offset.x)) + "px";
        volumeContainer.style.top = Math.max(0, Math.min(window.innerHeight - volumeContainer.offsetHeight, clientY - offset.y)) + "px";
      };

      // ãƒ‘ãƒãƒ«ç§»å‹•ç”¨ã®ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆãƒã‚¦ã‚¹ã¨ã‚¿ãƒƒãƒã®ä¸¡æ–¹ã«å¯¾å¿œï¼‰
      volumeContainer.addEventListener("mousedown", startDrag); // ãƒã‚¦ã‚¹æŠ¼ä¸‹
      window.addEventListener("mousemove", doDrag); // ãƒã‚¦ã‚¹ç§»å‹•
      window.addEventListener("mouseup", () => isDragging = false); // ãƒã‚¦ã‚¹é›¢ã™
      volumeContainer.addEventListener("touchstart", startDrag); // æŒ‡ã§è§¦ã‚Œã‚‹
      window.addEventListener("touchmove", doDrag); // æŒ‡ã‚’å‹•ã‹ã™
      window.addEventListener("touchend", () => isDragging = false); // æŒ‡ã‚’é›¢ã™

      // --- 7. éŸ³ã‚’é³´ã‚‰ã™å‡¦ç† ---
      function playSuccessSound() {
        // ã‚¹ã‚³ã‚¢ãŒ10ã®å€æ•°ï¼ˆ10, 20...ï¼‰ãªã‚‰ã‚¹ãƒšã‚·ãƒ£ãƒ«éŸ³ã€ãã‚Œä»¥å¤–ã¯çŒ«ã®éŸ³ã«ã™ã‚‹
        let targetSound = (score > 0 && score % 10 === 0) ? specialSound : catSound;
        targetSound.volume = volume / 100; // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®è¨­å®šã‚’åæ˜ ï¼ˆ0.0ã€œ1.0ï¼‰
        targetSound.currentTime = 0; // é€£ç¶šã§é³´ã‚‰ã›ã‚‹ã‚ˆã†ã«å†ç”Ÿä½ç½®ã‚’æœ€åˆã«æˆ»ã™
        targetSound.play().catch(() => {}); // å†ç”Ÿï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã®åˆ¶é™ã§é³´ã‚‰ãªãã¦ã‚‚ã‚¨ãƒ©ãƒ¼ã«ã—ãªã„ï¼‰
      }

      // --- 8. ã‚²ãƒ¼ãƒ ã®è¨ˆç®—å‡¦ç†ï¼ˆä½ç½®ã®æ›´æ–°ã‚„è·³ã­è¿”ã‚Šï¼‰ ---
      function update() {
        if (!isGameStarted) return; // ã¾ã å§‹ã¾ã£ã¦ã„ãªã„ãªã‚‰å‹•ã‹ã•ãªã„
        spriteX += spriteSpeed[0]; // ã‚´ãƒã¡ã‚ƒã‚“ã‚’æ¨ªã«ç§»å‹•ã•ã›ã‚‹
        spriteY += spriteSpeed[1]; // ã‚´ãƒã¡ã‚ƒã‚“ã‚’ç¸¦ã«ç§»å‹•ã•ã›ã‚‹

        // ã€ä¿®æ­£å‰ã€‘ const bounceMargin = 40;
        const bounceMargin = 80; // ã‚µã‚¤ã‚ºã«åˆã‚ã›ã¦ä½™ç™½ã‚’å¤§ããã™ã‚‹
        // å·¦ã®å£ã‹å³ã®å£ã«å½“ãŸã£ãŸã‚‰ã€æ¨ªã®ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚’åè»¢ã•ã›ã‚‹
        if (spriteX < bounceMargin || spriteX > canvas.width - bounceMargin) spriteSpeed[0] *= -1;
        // ä¸Šã®å£ã‹ä¸‹ã®å£ã«å½“ãŸã£ãŸã‚‰ã€ç¸¦ã®ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚’åè»¢ã•ã›ã‚‹
        if (spriteY < bounceMargin || spriteY > canvas.height - bounceMargin) spriteSpeed[1] *= -1;
      }

      // --- 9. ç”»é¢ã®æç”»å‡¦ç†ï¼ˆçµµã‚’æãï¼‰ ---
      function draw() {
        // ç”»é¢å…¨ä½“ã‚’ç´ºè‰²ã§å¡—ã‚Šã¤ã¶ã—ã¦ãƒªã‚»ãƒƒãƒˆã™ã‚‹
        ctx.fillStyle = "#0a0a32";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // èƒŒæ™¯ã«ã†ã£ã™ã‚‰ã¨ã‚¿ã‚¤ãƒˆãƒ«ã‚’æã
        ctx.textAlign = "center"; // ä¸­å¤®æƒãˆ
        ctx.textBaseline = "middle"; // ä¸Šä¸‹ã®ä¸­å¤®
        ctx.fillStyle = "rgba(255, 255, 255, 0.15)"; // éå¸¸ã«è–„ã„ç™½è‰²
        const titleFontSize = Math.min(canvas.width / 10, 80); // ç”»é¢ã‚µã‚¤ã‚ºã«åˆã‚ã›ãŸæ–‡å­—ã®å¤§ãã•
        ctx.font = `bold ${titleFontSize}px sans-serif`; // ãƒ•ã‚©ãƒ³ãƒˆè¨­å®š
        ctx.fillText("ã‚´ãƒã¡ã‚ƒã‚“ã‚’è¿½ãˆ", canvas.width / 2, 100); // æç”»

        // ã¾ã å§‹ã¾ã£ã¦ã„ãªã„å ´åˆã¯ã€Œã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚¹ã‚¿ãƒ¼ãƒˆã€ã®æ–‡å­—ã‚’è¡¨ç¤º
        if (!isGameStarted) {
          ctx.fillStyle = "rgba(255, 255, 255, 0.8)";
          ctx.font = "20px Arial";
          ctx.fillText("ç”»é¢ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚¹ã‚¿ãƒ¼ãƒˆï¼!", canvas.width / 2, canvas.height / 2 + 100);
        }

        // ä¸‹éƒ¨ä¸­å¤®ã«ç¾åœ¨ã®ã‚¹ã‚³ã‚¢ã‚’è–„ãè¡¨ç¤º
        ctx.fillStyle = "rgba(255, 255, 255, 0.4)";
        ctx.font = "bold 24px Arial";
        ctx.fillText(`Score: ${score}`, canvas.width / 2, canvas.height - 100); //ä¸‹ã‹ã‚‰ï¼•ï¼ã‚’ã—ãŸã‹ã‚‰ï¼‘ï¼ï¼ã«å¤‰æ›´ã€‚ã‚¹ãƒãƒ›å¯¾ç­–

        // ã‚´ãƒã¡ã‚ƒã‚“ã®æç”»ã‚µã‚¤ã‚ºã‚’æ±ºå®šï¼ˆç”»é¢ã®çŸ­ã„æ–¹ã®17%ï¼‰
        // ã€ä¿®æ­£å‰ã€‘ const size = Math.min(canvas.width, canvas.height) * 0.17;
        const size = Math.min(canvas.width, canvas.height) * 0.34; // 2å€ã®å¤§ãã•ã«
        if (isImageLoaded) { // ç”»åƒãŒèª­ã¿è¾¼ã‚ã¦ã„ãŸã‚‰ç”»åƒã‚’æã
          ctx.drawImage(spriteImage, spriteX - size / 2, spriteY - size / 2, size, size);
        } else { // èª­ã¿è¾¼ã‚ã¦ã„ãªã‘ã‚Œã°ä»£ã‚ã‚Šã®ç™½ã„ä¸¸ã‚’æã
          ctx.fillStyle = "white";
          ctx.beginPath();
          ctx.arc(spriteX, spriteY, size/3, 0, Math.PI * 2);
          ctx.fill();
        }
      }

      // --- 10. ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ—ï¼ˆè¶…é«˜é€Ÿã§ç¹°ã‚Šè¿”ã—å®Ÿè¡Œã•ã‚Œã‚‹ï¼‰ ---
      function loop() {
        update(); // è¨ˆç®—ã™ã‚‹
        draw(); // æã
        requestAnimationFrame(loop); // æ¬¡ã®æç”»ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å†åº¦loopã‚’å‘¼ã¶
      }

      // --- 11. ã‚¯ãƒªãƒƒã‚¯ã‚„ã‚¿ãƒƒãƒ—ã‚’ã•ã‚ŒãŸã¨ãã®åˆ¤å®šå‡¦ç† ---
      function handleClick(e) {
        // éŸ³é‡ãƒ‘ãƒãƒ«ã‚’è§¦ã£ã¦ã„ã‚‹ã¨ãã¯ã‚²ãƒ¼ãƒ ã®å½“ãŸã‚Šåˆ¤å®šã‚’ã—ãªã„
        if (e.target.closest("#volume-container")) return;

        if (!isGameStarted) { // åˆã‚ã¦ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸãªã‚‰
          isGameStarted = true; // ã‚²ãƒ¼ãƒ é–‹å§‹ãƒ•ãƒ©ã‚°ã‚’ã‚ªãƒ³ã«ã™ã‚‹
          spriteSpeed = [3, 3]; // ã‚´ãƒã¡ã‚ƒã‚“ã«æœ€åˆã®ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚’ä¸ãˆã‚‹
          return; // æœ€åˆã®ã‚¯ãƒªãƒƒã‚¯ã¯ã€Œæ•ã¾ãˆãŸã€ã“ã¨ã«ã¯ã—ãªã„
        }

        // è§¦ã‚ŒãŸåº§æ¨™ã‚’å–å¾—
        const clientX = (e.touches ? e.touches[0].clientX : e.clientX);
        const clientY = (e.touches ? e.touches[0].clientY : e.clientY);

        // ã‚´ãƒã¡ã‚ƒã‚“ã¨è§¦ã‚ŒãŸä½ç½®ã®è·é›¢ã‚’è¨ˆç®—ã™ã‚‹
        const dist = Math.sqrt(Math.pow(clientX - spriteX, 2) + Math.pow(clientY - spriteY, 2));
        // ã€ä¿®æ­£å‰ã€‘ const hitLimit = Math.min(canvas.width, canvas.height) * 0.17;
        const hitLimit = Math.min(canvas.width, canvas.height) * 0.34; // åˆ¤å®šã‚‚2å€ã«

        if (dist < hitLimit) { // ã‚‚ã—è·é›¢ãŒåˆ¤å®šç¯„å›²å†…ï¼ˆæ•ã¾ãˆãŸï¼‰ãªã‚‰
          score++; // ã‚¹ã‚³ã‚¢ã‚’1å¢—ã‚„ã™
          // ã‚´ãƒã¡ã‚ƒã‚“ã‚’ãƒ©ãƒ³ãƒ€ãƒ ãªä½ç½®ã«ãƒ¯ãƒ¼ãƒ—ã•ã›ã‚‹
// ã€ä¿®æ­£æ¡ˆã€‘ãƒ¯ãƒ¼ãƒ—ä½ç½®ã®è¨ˆç®—
// 50 â†’ 100, -100 â†’ -200 ã«ã™ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šä¸­å¤®å¯„ã‚Šã«ç¾ã‚Œã¾ã™
spriteX = Math.random() * (canvas.width - 200) + 100;
spriteY = Math.random() * (canvas.height - 200) + 100;
          // æ•ã¾ãˆã‚‹ãŸã³ã«ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚’5%ãšã¤é€Ÿãã™ã‚‹
          spriteSpeed[0] *= 1.05;
          spriteSpeed[1] *= 1.05;
          playSuccessSound(); // éŸ³ã‚’é³´ã‚‰ã™
        }
      }

      // ã‚¯ãƒªãƒƒã‚¯ã¨ã‚¿ãƒƒãƒã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™»éŒ²
      canvas.addEventListener("mousedown", handleClick); // ãƒã‚¦ã‚¹
      canvas.addEventListener("touchstart", (e) => { // ã‚¿ãƒƒãƒï¼ˆã‚¹ãƒãƒ›ï¼‰
        e.preventDefault(); // ç”»é¢ãŒå‹•ã‹ãªã„ã‚ˆã†ã«åˆ¶é™
        handleClick(e); // åˆ¤å®šå‡¦ç†ã‚’å®Ÿè¡Œ
      }, { passive: false }); // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æŠ‘æ­¢ã‚’æœ‰åŠ¹ã«ã™ã‚‹ãŸã‚ã®è¨­å®š

      // ã‚²ãƒ¼ãƒ ã®ãƒ«ãƒ¼ãƒ—å‡¦ç†ã‚’é–‹å§‹ï¼
      loop();
    </script>
  </body>
</html>
